// Code generated by hertz generator.

package main

import (
	"douyin/service/api/biz/comment"
	"douyin/service/api/biz/favorite"
	"douyin/service/api/biz/message"
	"douyin/service/api/biz/relation"
	"douyin/service/api/biz/user"
	"douyin/service/api/biz/video"
	"douyin/service/api/mw"
	"github.com/cloudwego/hertz/pkg/app/server"
)

// customizeRegister registers customize routers.
func customizedRegister(r *server.Hertz) {
	douyin := r.Group("/douyin")

	// 限流中间件，测试时不要开启
	//douyin.Use(mw.RateLimiter())
	//douyin.GET("/test", mw.RateLimiter(), user.Test)

	// user service
	userGroup := douyin.Group("/user")
	{
		userGroup.POST("/register/", user.Register)
		userGroup.POST("/login/", user.Login)
		userGroup.GET("/", mw.AuthWithoutLogin(), user.Info)
	}

	// video service
	douyin.GET("/feed/", mw.AuthWithoutLogin(), video.FeedList)
	videoGroup := douyin.Group("/publish")
	{
		videoGroup.GET("/list/", mw.AuthWithoutLogin(), video.GetPublishList)
		videoGroup.POST("/action/", mw.AuthBody(), video.Publish)
	}
	// comment service
	commentGroup := douyin.Group("/comment")
	{
		commentGroup.POST("/action/", mw.Auth(), comment.Action)
		commentGroup.GET("/list/", mw.AuthWithoutLogin(), comment.List)
	}

	// favorite service
	favoriteGroup := douyin.Group("/favorite")
	{
		favoriteGroup.POST("/action/", mw.Auth(), favorite.Action)
		favoriteGroup.GET("/list/", mw.AuthWithoutLogin(), favorite.List)
	}

	// relation service
	relationGroup := douyin.Group("/relation")
	{
		relationGroup.POST("/action/", mw.Auth(), relation.Action)
		relationGroup.GET("/follow/list/", mw.Auth(), relation.FollowList)
		relationGroup.GET("/follower/list/", mw.Auth(), relation.FollowerList)
		relationGroup.GET("/friend/list/", mw.Auth(), relation.FriendList)
	}
	// message service
	messageGroup := douyin.Group("/message")
	{
		messageGroup.POST("/action/", mw.Auth(), message.Action)
		messageGroup.GET("/chat/", mw.Auth(), message.Chat)
	}
}
